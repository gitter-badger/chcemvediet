{# vim: set filetype=htmldjango :#}
{% extends "main/base/single_column.html" %}
{% load trans from i18n %}

{% comment %}
 %
 % Context:
 %  -- wizard: chcemvediet.apps.wizards.wizard.Wizard
 %  -- step: chcemvediet.apps.wizards.wizard.Step
 %
{% endcomment %}


{% block content %}
  <form class="form-horizontal" method="post" action="{{ step.get_url }}">
    {% csrf_token %}
    {% block header %}
      <h1>
        {% block header-heading %}{% endblock %}
      </h1>
      {% block header-steps %}
        {% if wizard.steps|length > 1 %}
          <div>
            {% for other_step in wizard.steps %}
              <a class="with-tooltip" href="{{ other_step.get_url }}" data-toggle="tooltip"
                 title="{{ other_step.label }}">
                {% if other_step == step %}
                  <span class="badge badge-info">{{ other_step.index|add:1 }}</span>
                {% elif other_step.accessible  %}
                  <span class="badge badge-success">{{ other_step.index|add:1 }}</span>
                {% else %}
                  <span class="badge">{{ other_step.index|add:1 }}</span>
                {% endif %}
              </a>
            {% endfor %}
          </div>
        {% endif %}
      {% endblock %}
    {% endblock %}
    {% block body-plus-footer %}
      {% block body %}
        {% block body-text %}
          {% if step.text_template %}{% include step.text_template %}{% endif %}
        {% endblock %}
        {% block body-form %}
          {% if step.form_template %}
            <div>{% include step.form_template with form=step %}</div>
          {% elif step.non_field_errors %}
            <div class="control-group error">
              <span class="help-block">{{ step.non_field_errors|join:" " }}</span>
            </div>
          {% endif %}
        {% endblock %}
      {% endblock %}
      <div class="form-actions">
        {% block footer %}
          {% block footer-save %}
            <button type="submit" class="btn" name="button" value="save">
              {% block footer-save-label %}
                <i class="icon-file"></i> {% trans 'wizards:wizard:save' %}
              {% endblock %}
            </button>
          {% endblock %}
          {% block footer-prev %}
            {% if not step.is_first %}
              <a class="btn" href="{{ step.prev.get_url }}">
                {% block footer-prev-label %}
                  <i class="icon-chevron-left"></i> {% trans 'wizards:wizard:prev' %}
                {% endblock %}
              </a>
            {% endif %}
          {% endblock %}
          {% block footer-next %}
            <button type="submit" class="btn btn-primary" name="button" value="next">
              {% if step.is_last %}
                {% block footer-finish-label %}
                  <i class="icon-chevron-right icon-white"></i> {% trans 'wizards:wizard:finish' %}
                {% endblock %}
              {% else %}
                {% block footer-next-label %}
                  <i class="icon-chevron-right icon-white"></i> {% trans 'wizards:wizard:next' %}
                {% endblock %}
              {% endif %}
            </button>
          {% endblock %}
          {% block footer-cancel %}
            <a class="btn pull-right" href="{% block footer-cancel-href %}{% endblock %}">
              {% block footer-cancel-label %}
                <i class="icon-remove"></i> {% trans 'wizards:wizard:cancel' %}
              {% endblock %}
            </a>
          {% endblock %}
        {% endblock %}
      </div>
    {% endblock %}
  </form>
{% endblock %}
