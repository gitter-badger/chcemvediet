{# vim: set filetype=htmldjango shiftwidth=2 :#}
{% extends "main/base/single_column.html" %}
{% load trans from i18n %}

{% comment %}
 %
 % Context:
 %  -- wizard: chcemvediet.apps.wizards.wizard.Wizard
 %  -- step: chcemvediet.apps.wizards.wizard.Step
 %
{% endcomment %}


{% block content %}
  <form class="form-horizontal" method="post" action="{{ step.get_url }}">
    {% csrf_token %}
    {% block header %}
      <h1>
        {% block header-heading %}{% endblock %}
      </h1>
      {% block header-steps %}
        {% if wizard.steps|length > 1 %}
          <p>
            {% for other_step in wizard.steps %}
              <a class="pln-with-tooltip" href="{{ other_step.get_url }}" data-toggle="tooltip"
                 title="{{ other_step.label }}">
                {% if other_step == step %}
                  <span class="label label-info">{{ other_step.index|add:1 }}</span>
                {% elif other_step.accessible  %}
                  <span class="label label-success">{{ other_step.index|add:1 }}</span>
                {% else %}
                  <span class="label label-default">{{ other_step.index|add:1 }}</span>
                {% endif %}
              </a>
            {% endfor %}
          </p>
        {% endif %}
      {% endblock %}
    {% endblock %}
    {% block body-plus-footer %}
      {% block body %}
        {% block body-text %}
          {% if step.text_template %}{% include step.text_template %}{% endif %}
        {% endblock %}
        {% block body-form %}
          {% if step.form_template %}
            <div>{% include step.form_template with form=step %}</div>
          {% elif step.non_field_errors %}
            <p class="text-danger">{{ form.non_field_errors|join:" " }}</p>
          {% endif %}
        {% endblock %}
      {% endblock %}
      <div class="form-group">
        <div class="col-sm-offset-3 col-sm-9">
          {% block footer %}
            {% block footer-save %}
              <button type="submit" class="btn btn-default" name="button" value="save">
                {% block footer-save-label %}
                  <span class="glyphicon glyphicon-file"></span>
                  {% trans 'wizards:wizard:save' %}
                {% endblock %}
              </button>
            {% endblock %}
            {% block footer-prev %}
              {% if not step.is_first %}
                <a class="btn btn-default" href="{{ step.prev.get_url }}">
                  {% block footer-prev-label %}
                    <span class="glyphicon glyphicon-chevron-left"></span>
                    {% trans 'wizards:wizard:prev' %}
                  {% endblock %}
                </a>
              {% endif %}
            {% endblock %}
            {% block footer-next %}
              <button type="submit" class="btn btn-primary" name="button" value="next">
                {% if step.is_last %}
                  {% block footer-finish-label %}
                    <span class="glyphicon glyphicon-chevron-right"></span>
                    {% trans 'wizards:wizard:finish' %}
                  {% endblock %}
                {% else %}
                  {% block footer-next-label %}
                    <span class="glyphicon glyphicon-chevron-right"></span>
                    {% trans 'wizards:wizard:next' %}
                  {% endblock %}
                {% endif %}
              </button>
            {% endblock %}
            {% block footer-cancel %}
              <a class="btn btn-link pull-right" href="{% block footer-cancel-href %}{% endblock %}">
                {% block footer-cancel-label %}
                  <span class="glyphicon glyphicon-remove"></span>
                  {% trans 'wizards:wizard:cancel' %}
                {% endblock %}
              </a>
            {% endblock %}
          {% endblock %}
        </div>
      </div>
    {% endblock %}
  </form>
{% endblock %}
